## Предефиниране на оператори

- C++ позволява на програмистите да задават ново значение на функционалност на знаците за операции  
**предефиниране на оператори**

**Ползи**
- По-лесно и по-интуитивно за иползване е прилагането на операция, а не извикване на функция
- Позволяват по-сбито извикване (без да се използват скоби при изпълнението на операцията)  
  
**Ограничения**
- Предефинирането е позволено, само ако поне един от операндите е обект от клас
- Не се допуска предефиниране на операции между стандартни типове, например операцията + между два int,  
тъй като това би променило смисъла (семантиката) на операцията

## Видове оператори

**Операциите са**
- Унарни - с един операнд, например **!b**
- Бинарни - с два операнда, например **a + c**

**Всяка операция се характеризира с**
- Позиция на знака спрямо операнда или операндите му
- Приоритет
- Асоцииране на последователни операции

## Позволени оператори за предефиниране

| + | - | * | / | % | ^ | & |
| - | - | - | - | - | - | - |
| \| | ~ | ! | = | < | > | += | 
| -= | \*= | /= | %= | ^= | &= | \|= |
| << | >> | >>= | <<= | == | != | <= |
| >= | && | \|\| | ++ | -- | ->* | , |
| -> | [] | () | new | new[] | delete | delete[] |

## Видове оператори

**Позицията** на операторите спрямо операнда го определя като
- Префиксен **++a**
- Инфиксен **a + c**
- Постфиксен **a++**  
   
- **Приоритетът** на операциите определя реда на тяхното изпълнение в израз
- **Асоциирането** на операциите определя реда на изпълнение на последователно записани операции с еднакъв приоритет

**Видове оператори спрямо асоциативността** (C++)
- **Ляво асоциативни** - изпълняват се от ляво на дясно
- **Дясно асоциативни** - изпълняват се от дясно на ляво  
  
**Пример**
- Ляво асоциативни операции `a + b - c` се изпълнява като `(a + b) - c`
- Дясно асоциативни операции `a = b = c` се изпълнява като `a = (b = c)`

**Оператори които не могат да се предефинират**  
- оператор за избор на компоненти `.`
- оператор за избор на компоненти на клас чрез указател `*`
- оператор за област на действие `::`
- троен оператор `?:`
- оператор `sizeof`

## Операторни функции

**Операциите в C++ могат да бъдат предефинирани като**
- **обикновенни функции, извън дефиницията на кой да е клас
- **член-функции** на клас

**Предефиниране като функция**
```
<тип на резултат> operator<знак на операция> (<параметри: един или два>)
{
  <тяло>
}
```
**Пример**
```
int operator-(const Time&lhs, const Time&b rhs)
{
  return lhs.seconds_from(rhs);
}
```
